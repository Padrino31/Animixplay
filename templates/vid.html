<!DOCTYPE html>
<html lang="en">

<head>
    <!-- existing code... -->
	<link rel="icon" type="image/x-icon"
        href="https://d1nxzqpcg2bym0.cloudfront.net/google_play/com.anime.flv/ec0213b8-f1d8-11e7-8b0a-7d62278fee98/128x128">
    <title>animeflv VideoPlayer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <style type="text/css">
        body {
            background-color: #000;
        }

        .container {
            width: 100%;
            height: 100%;
        }

        video {
            width: 100%;
            height: 100%;
        }
    </style>

  <head>
<link href="https://vjs.zencdn.net/7.11.4/video-js.css" rel="stylesheet" />
<script src="https://vjs.zencdn.net/7.11.4/video.js"></script>


</head>

</head>
<body>
<video id="my-video" class="video-js vjs-default-skin" controls preload="auto" data-setup='{"fluid": true}'>
  <source src="https://corsbypass.herokuapp.com/{{ m3u8 }}" type="application/x-mpegURL">
</video>

<script>
	document.addEventListener("DOMContentLoaded", () => {
  const player = videojs("my-video", { title: "{{ title }}" });

  player.qualityPickerPlugin({
    defaultQuality: 0,
    availableQualities: [360, 480, 720, 1080],
    qualitySwitchCallback: (quality) => updateQuality(quality),
  });

  function updateQuality(newQuality) {
    player.src({
      src: source.replace(".m3u8", "_" + newQuality + ".m3u8"),
      type: "application/x-mpegURL",
    });
    player.play();
  }
});


</script>
</body>
</html>
