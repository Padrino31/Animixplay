<!DOCTYPE html>
<html lang="en">

<head>
        <link rel="icon" type="image/x-icon"
       href="https://d1nxzqpcg2bym0.cloudfront.net/google_play/com.anime.flv/ec0213b8-f1d8-11e7-8b0a-7d62278fee98/128x128">
    <title>Watch {{ TITLE }} - animeflv</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Watch {{ TITLE }} - animeflv">
    <meta name="description"
        content="Watch {{ TITLE }} free anime online and it's latest episodes on animeflv. We provide free anime online experience without ads, signing up or downloading.">
    <meta name="keywords"
        content="{{ TITLE }},animeflv, hindi dub, hindi sub, english dub, watch anime online, free anime, anime stream, anime hd, english sub, kissanime, gogoanime, animeultima, 9anime, 123animes, animefreak, vidstreaming, gogo-stream, animekisa, zoro.to, gogoanime.run, animefrenzy, animekisa">
    <meta name="charset" content="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="revisit-after" content="1 days">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Language" content="en">
    <meta property="og:title" content="Watch {{ TITLE }} - animeflv">
    <meta property="og:description"
        content="Watch {{ TITLE }} free anime online and it's latest episodes on animeflv. We provide free anime online experience without ads, signing up or downloading.">
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="animeflv">
    <meta property="og:url" content="{{ URL }}">
    <meta property="twitter:title" content="Watch {{ TITLE }} - animeflv">
    <meta property="twitter:description"
        content="Watch {{ TITLE }} free anime online and it's latest episodes on animeflv. We provide free anime online experience without ads, signing up or downloading.">
    <meta property="twitter:url" content="{{ URL }}">
    <meta property="twitter:card" content="summary">
    <meta name="apple-mobile-web-app-status-bar" content="#202125">
	<meta name="apple-mobile-web-app-capable" content="yes">

    <meta name="theme-color" content="#202125">
         <link href="../static/css/styles.css" rel="stylesheet">
    <link href="../static/css/anime.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <script type = "module" src = "script.js"></script> 
    <style>
        #cover {
            background-image: url('{{ IMG }}');
        }
    </style>
</head>

<body>
<nav>
         <div class="menu-icon">
            <span class="fas fa-bars"></span>
         </div>
         <div class="logo">
            <a href="#"><img src="../static/img/animeflv.png"></a>
         </div>
         <div class="nav-items">
		  <li><a href="/">Home</a></li>
             <li><a href="../static/css/bookmark.html">Bookmark</a></li>
        <li><a href="../static/css/watchlist.html">Watchlist</a></li>
         </div>
         <div class="search-icon">
            <span class="fas fa-search"></span>
         </div>
         <div class="cancel-icon">
            <span class="fas fa-times"></span>
         </div>
                    <form action="/search" method='GET'>
                <input type="text" name="query" id="query" placeholder="Search Anime..." required>
                <button type="submit"><i class="fa fa-search"></i>
                </button>
            </form>
        </div>
      </nav>
    <section>
        <div id="background">
            <div id="cover"></div>
        </div>
        <div class="anime row">
            <div class="poster col-3">
                <img src="{{ IMG }}">
            </div>
<div class="details col-6">
    <h1>{{ TITLE }}</h1>
    <div class="mid" style="margin: 20px 0px;">
        <span class="cbox">HD</span>
        <span class="cbox">{{ LANG }}</span>
        <span class="dot"></span>
        <span class="year">{{ TYPE }}</span>
    </div>
<div id="watchh" class="mid">
    <a href="{{ WATCHNOW }}" class="watch-btn" style="display: inline-block; padding: 10px 20px; font-size: 20px; border-radius: 5px;">
        <i class="fa fa-play"></i> Watch Now
    </a>
    <button id="addToListBtn" onclick="showListOptions('{{ WATCHNOW }}', '{{ IMG }}', '{{ TITLE }}')" style="display: inline-block; padding: 10px 20px; font-size: 20px; border-radius: 5px;">
        Add to my list
    </button>
</div>

<!-- Add a modal for the list options -->
<div id="listOptionsModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h3>Add to list</h3>
        <p>Choose the list you want to add this anime to:</p>
        <button id="addToWatchlistBtn">Watchlist</button>
        <button id="addToCompletedListBtn">Completed List</button>
    </div>
</div>

    <div id="overview3" class="synopsis">
        SYNOPSIS
    </div>
</div>


            <div id="info" class="col-3">
                <div class="info-items overview">
                    <span id="overview2" class="item-head">Overview:</span>
                    <span id="overview1" class="item-des">SYNOPSIS</span>
                </div>

                <div class=info-items>
                    <span class="item-head">Other Names:</span>
                    <span class="item-des">{{ OTHER }}</span>
                </div>
                <div class=info-items>
                    <span class="item-head">Episodes:</span>
                    <span class="item-des">{{ TOTAL }}</span>
                </div>
                <div class=info-items>
                    <span class="item-head">Release Year:</span>
                    <span class="item-des">{{ YEAR }}</span>
                </div>
                <div class=info-items>
                    <span class="item-head">Type:</span>
                    <span class="item-des">{{ TYPE }}</span>
                </div>
                <div class=info-items>
                    <span class="item-head">Status:</span>
                    <span class="item-des">{{ STATUS }}</span>
                </div>
                <div class=info-items>
                    <span class="item-head">Studios:</span>
                    <span class="item-des">{{ STUDIO }}</span>
                </div>

                <div class="info-items genre">
                    <span class="item-head">Genres:</span> GENERES
                </div>



            </div>
        </div>
    </section>

    <section id="watch">
        <div class="divo">
            <h2>List Of Episodes:</h2>
            <div class="divo2">
                EPISODES
            </div>
        </div>

    </section>

    <section>
        <div class="divox">
            <h2 id="latest">Similar Animes</h2>
            <div id="latest2">
                DISPLAY_ANIME
            </div>
        </div>
    </section>
	<hr>
    <footer>
        <div>
            <p style="color:white;">Animixplay All rights reserved Â© Animixplay</p>
        </div>
    </footer>
    <hr>
<script>	
	
document.addEventListener("DOMContentLoaded", function () {
    const imageObserver = new IntersectionObserver((entries, imgObserver) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                const lazyImage = entry.target;
                lazyImage.src = lazyImage.dataset.src;
            }
        })
    });
    const arr = document.querySelectorAll('img.lzy_img');
    arr.forEach((v) => {
        imageObserver.observe(v);
    });
})

function showListOptions(link, img, title) {
    // Get the list options modal
    const modal = document.getElementById("listOptionsModal");

    // Get the buttons for adding to the watchlist and completedList
    const addToWatchlistBtn = document.getElementById("addToWatchlistBtn");
    const addToCompletedListBtn = document.getElementById("addToCompletedListBtn");

    // Show the modal
    modal.style.display = "block";

    // When the user clicks the "Watchlist" button, add the anime to the watchlist
    addToWatchlistBtn.onclick = function() {
        addToList(link, img, title, "watchlist");
        modal.style.display = "none";
    }

    // When the user clicks the "Completed List" button, add the anime to the completedList
    addToCompletedListBtn.onclick = function() {
        addToList(link, img, title, "completedList");
        modal.style.display = "none";
    }

    // When the user clicks the close button or anywhere outside the modal, close the modal
    const closeBtn = modal.getElementsByClassName("close")[0];
    window.onclick = function(event) {
        if (event.target == modal || event.target == closeBtn) {
            modal.style.display = "none";
        }
    }
}

function addToList(link, img, title, list) {
    // Create an object with the anime data
    const anime = { link, img, title };

    // Get the current watchlist and completedList from local storage or create an empty array
    let watchlist = JSON.parse(localStorage.getItem("watchlist")) || [];
    let completedList = JSON.parse(localStorage.getItem("completedList")) || [];

    // Check if the anime already exists in the watchlist or completedList
    const watchlistExists = watchlist.some((item) => item.link === link);
    const completedListExists = completedList.some((item) => item.link === link);

    // If the anime is already in the completedList or watchlist, show an alert
if (watchlistExists || completedListExists) {
alert("This anime is already in your list!");
return;
}
	// If the anime is not in the watchlist or completedList, add it to the selected list
if (list === "watchlist") {
    watchlist.push(anime);
    localStorage.setItem("watchlist", JSON.stringify(watchlist));
} else if (list === "completedList") {
    completedList.push(anime);
    localStorage.setItem("completedList", JSON.stringify(completedList));
}

// Show a success message
alert("Anime added to your " + list + "!");
}	    
	   	    
// Restore the last episode watched when the "Watch Now" button is clicked
const watchNowBtn = document.querySelector('.watch-btn');
watchNowBtn.addEventListener('click', function() {
    const lastEpisode = localStorage.getItem("lastEpisode");
    if (lastEpisode) {
        window.location.href = lastEpisode;
    }
});

// Add active class to the current link
var header = document.getElementById("header");
var links = header.getElementsByClassName("menu")[0].getElementsByTagName("a");
for (var i = 0; i < links.length; i++) {
    links[i].addEventListener("click", function() {
        var current = document.getElementsByClassName("active");
        if (current.length > 0) {
            current[0].className = current[0].className.replace(" active", "");
        }
        this.className += " active";
    });
}

 </script>

	<script>
const menuBtn = document.querySelector(".menu-icon span"); 
const searchBtn = document.querySelector(".search-icon"); 
const cancelBtn = document.querySelector(".cancel-icon"); 
const items = document.querySelector(".nav-items"); 
const form = document.querySelector("form"); 

menuBtn.onclick = () => { 
  items.classList.add("active"); 
  menuBtn.classList.add("hide"); 
  searchBtn.classList.add("hide"); 
  cancelBtn.classList.add("show"); 
  document.body.style.overflow = "hidden"; // prevent scrolling 
}

cancelBtn.onclick = () => { 
  items.classList.remove("active"); 
  menuBtn.classList.remove("hide"); 
  searchBtn.classList.remove("hide"); 
  cancelBtn.classList.remove("show"); 
  form.classList.remove("active"); 
  cancelBtn.style.color = "#ff3d00"; 
  document.body.style.overflow = "auto"; // enable scrolling 
}

searchBtn.onclick = () => { 
  form.classList.add("active");		 
  form.style.display = "inline-block"; // or "flex" 
  searchBtn.classList.add("hide"); 
  cancelBtn.classList.add("show"); 
  document.body.style.overflow = "hidden"; // prevent scrolling 
}
	</script>
</body>

</html>
